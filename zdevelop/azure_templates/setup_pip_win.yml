steps:

# Download Secure File
# Download a secure file to a temporary location on the build or release agent
- task: DownloadSecureFile@1
  inputs:
    secureFile: pip.conf
  displayName: 'download pip.conf'

# Download Secure File
# Download a secure file to a temporary location on the build or release agent
- task: DownloadSecureFile@1
  inputs:
    secureFile: .pypirc
  displayName: 'download .pypirc'

- script: |
    mkdir %APPDATA%\pip
    mv $(Agent.TempDirectory)\pip.conf %APPDATA%\pip\pip.ini
    mv $(Agent.TempDirectory)\.pypirc %USERPROFILE%\.pypirc
  displayName: 'move pip credentials'

- script: |
    python -m pip install --upgrade pip
    pip install --upgrade setuptools
  displayName: 'Upgrade pip and setuptools'
